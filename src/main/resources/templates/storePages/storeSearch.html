<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head  th:replace="~{fragments/header::header}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <meta charset="UTF-8">
  <title>가게 목록</title>
</head>
<body>
<link rel="stylesheet" type="text/css" th:href="@{/css/store.css}">
<div class="container">
  <div th:replace="~{fragments/bodyHeader::bodyHeader}"></div>

  <div class="header-store-container">
    <div class="store-search">
      <form th:action="@{/stores/search}" method="get">
        <input type="text" name="storeSearch" placeholder="가게 이름 검색" th:value="${storeSearch}" class="search-box">
        <img class="store-search-img" src="/images/search.png">
      </form>
    </div>
  </div>

  <div class="store-list">
    <table class="table mx-auto">
      <thead>
      <tr>
        <th scope="col">번호</th>
        <th scope="col">이름</th>
        <th scope="col"></th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="store, iterStat : ${stores}">

        <td class="col-num" th:text="${iterStat.count + (page.number * 10)}"></td>
        <td class="col-name" th:text="${store.store_name}"></td>
        <td class="col-action">
          <button class="btn btn-primary edit_btn" id="edit_btn" th:data-store-id="${store.store_id}">수정</button>
          <!--          <button class="btn btn-danger delete_btn" id="delete_btn" th:data-store-id="${store.store_id}">삭제</button>-->
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- 페이지 네비게이션 -->
<nav aria-label="Page navigation example" class="d-flex justify-content-center">
  <ul class="pagination justify-content-center">
    <!-- Previous 버튼 -->
    <li class="page-item" th:classappend="${(page.number <= 10) ? 'disabled' : ''}">
      <a class="page-link" href="#" th:href="@{/stores/search(storeSearch=${storeSearch}, page=${(page.number - 9) <= 0 ? 1 : (page.number - 9)})}" aria-label="이전 페이지">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>

    <!-- 페이지 번호 생성 -->
    <li th:each="i : ${#numbers.sequence(1, 10)}"
        th:if="${page.totalPages >= (page.number / 10 * 10 + i)}"
        th:classappend="${page.number % 10 + 1== i ? 'active' : ''}" class="page-item">
      <a class="page-link" th:text="${(page.number / 10 * 10) + i}" th:href="@{/stores/search(storeSearch=${storeSearch}, page=${(page.number / 10 * 10) + i})}"></a>
    </li>

    <!-- Next 버튼 -->
    <li class="page-item" th:classappend="${(page.number + 11 > page.totalPages) ? 'disabled' : ''}">
      <a class="page-link" href="#" th:href="@{/stores/search(storeSearch=${storeSearch}, page=${page.number + 1 > page.totalPages ? page.totalPages : page.number + 11})}" aria-label="다음 페이지">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</nav>
<script th:src="@{/js/storeList.js}"></script>

</div>
</body>
</html>
